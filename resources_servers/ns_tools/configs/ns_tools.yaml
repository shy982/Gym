# NeMo Skills Tools Resources Server Configuration
#
# This resources server provides integration with nemo_skills ToolManager
# for tool execution (e.g., stateful Python code execution).
#
# USAGE:
#   ng_run "+config_paths=[resources_servers/ns_tools/configs/ns_tools.yaml,\
#   resources_servers/math_with_judge/configs/math_with_judge.yaml,\
#   responses_api_models/vllm_model/configs/vllm_model.yaml]"

ns_tools:
  resources_servers:
    ns_tools:
      entrypoint: app.py
      
      # Default verifier for samples without explicit verifier_type
      default_verifier: math_with_judge
      
      # Map of verifier names to server references
      # Add more verifiers here as needed (e.g., xlam_fc, mcqa)
      verifiers:
        math_with_judge:
          type: resources_servers
          name: math_with_judge
      
      # NeMo Skills tools to load
      nemo_skills_tools:
        - nemo_skills.mcp.servers.python_tool.PythonTool
      
      # Per-tool configuration overrides
      nemo_skills_tool_overrides:
        PythonTool:
          exec_timeout_s: 10

      # Sandbox configuration
      # Respects NEMO_SKILLS_SANDBOX_HOST/PORT env vars if set, else defaults
      sandbox_host: ${oc.env:NEMO_SKILLS_SANDBOX_HOST,127.0.0.1}
      sandbox_port: ${oc.env:NEMO_SKILLS_SANDBOX_PORT,6000}

      # Disable session replay after sandbox worker restarts (improves stability)
      disable_session_restore: true
      
      domain: agent
      verified: false
      description: NeMo Skills tool execution with math verification

# Agent configuration
ns_tools_simple_agent:
  responses_api_agents:
    simple_agent:
      entrypoint: app.py
      resources_server:
        type: resources_servers
        name: ns_tools
      model_server:
        type: responses_api_models
        name: policy_model
      datasets:
        - name: example
          type: example
          license: Apache 2.0
          jsonl_fpath: resources_servers/ns_tools/data/example.jsonl
